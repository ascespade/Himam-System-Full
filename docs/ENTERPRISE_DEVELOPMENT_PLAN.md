# ğŸš€ Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù†Ø¸Ø§Ù… - Enterprise SaaS Level
## Comprehensive Enterprise Development Plan

**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 2025-01-17  
**Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:** Ù†Ø¸Ø§Ù… Ù…Ø±ÙƒØ² Ø§Ù„Ù‡Ù…Ù… Ø§Ù„Ø·Ø¨ÙŠ - Himam Medical Center System  
**Ø§Ù„Ù‡Ø¯Ù:** Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù…Ø³ØªÙˆÙ‰ Enterprise SaaS Ù…ØªÙƒØ§Ù…Ù„ ÙˆÙ…Ø³ØªÙ‚Ø±

---

## ğŸ“‹ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ | Executive Summary

Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¥Ù„Ù‰ **Enterprise SaaS Level** Ù…Ø¹:
- âœ… Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© ÙƒØ§Ù…Ù„Ø©
- âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
- âœ… Integration Ù…Ø¹ Ø£Ù†Ø¸Ù…Ø© Ø®Ø§Ø±Ø¬ÙŠØ©
- âœ… AI & Automation Ù…ØªÙ‚Ø¯Ù…
- âœ… Real-time Monitoring & Analytics

**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** 20-24 Ø£Ø³Ø¨ÙˆØ¹ (5-6 Ø£Ø´Ù‡Ø±)  
**Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:** 3-4 Ù…Ø·ÙˆØ±ÙŠÙ† + 1 DevOps + 1 QA

---

## ğŸ†• Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### 1. âš™ï¸ Setup & Configuration Module (Ù…ÙˆØ¯ÙŠÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”´ Ø¹Ø§Ø¬Ù„ Ø¬Ø¯Ø§Ù‹  
**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** 3 Ø£Ø³Ø§Ø¨ÙŠØ¹

#### Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- âœ… **Ø¥Ø¯Ø§Ø±Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©**
  - Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
  - Ø±Ø¨Ø· Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø¨Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡
  - ØªØ­Ø¯ÙŠØ¯ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø®Ø¯Ù…Ø§Øª
  - ØªØ­Ø¯ÙŠØ¯ Ù…Ø¯Ø© ÙƒÙ„ Ø®Ø¯Ù…Ø©

- âœ… **Ø¥Ø¯Ø§Ø±Ø© Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªØ£Ù…ÙŠÙ†**
  - Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªØ£Ù…ÙŠÙ† Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©
  - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª API Ù„ÙƒÙ„ Ø´Ø±ÙƒØ© ØªØ£Ù…ÙŠÙ†
  - Credentials & Authentication
  - Coverage percentages
  - Claim submission endpoints
  - Response handling configurations

- âœ… **Ø¥Ø¯Ø§Ø±Ø© Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª**
  - Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
  - Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©
  - Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø¯ÙŠÙ†ÙŠØ©
  - Ø¥Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„ÙØ±Ø¯ÙŠØ©
  - Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø°Ø±ÙˆØ©

- âœ… **Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©**
  - Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ² (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ Ø§Ù„Ù‡Ø§ØªÙØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯)
  - Ø§Ù„Ù„ÙˆØ¬Ùˆ ÙˆØ§Ù„ØµÙˆØ±
  - Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (Google Maps integration)
  - Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„
  - Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ (Social media links)
  - Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ²
  - Terms & Conditions

- âœ… **Lookups Management**
  - Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¬Ù„Ø³Ø§Øª
  - Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯
  - Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª
  - Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©
  - ÙˆØºÙŠØ±Ù‡Ø§ Ù…Ù† Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©

#### Database Schema:
```sql
-- Services
CREATE TABLE services (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name_ar TEXT NOT NULL,
  name_en TEXT,
  description TEXT,
  duration_minutes INTEGER,
  price NUMERIC,
  category TEXT,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Insurance Companies
CREATE TABLE insurance_companies (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name_ar TEXT NOT NULL,
  name_en TEXT,
  api_endpoint TEXT,
  api_key TEXT,
  api_secret TEXT,
  coverage_percentage NUMERIC DEFAULT 80,
  is_active BOOLEAN DEFAULT TRUE,
  config JSONB, -- Additional API configurations
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Working Hours
CREATE TABLE working_hours (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  day_of_week INTEGER, -- 0=Sunday, 6=Saturday
  start_time TIME,
  end_time TIME,
  is_active BOOLEAN DEFAULT TRUE
);

-- Holidays
CREATE TABLE holidays (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name_ar TEXT NOT NULL,
  name_en TEXT,
  date DATE NOT NULL,
  is_recurring BOOLEAN DEFAULT FALSE,
  type TEXT -- 'national', 'religious', 'custom'
);

-- Center Info
CREATE TABLE center_info (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name_ar TEXT NOT NULL,
  name_en TEXT,
  logo_url TEXT,
  address TEXT,
  phone TEXT,
  email TEXT,
  location_lat NUMERIC,
  location_lng NUMERIC,
  working_hours JSONB,
  social_media JSONB,
  policies TEXT,
  terms_conditions TEXT,
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Lookups
CREATE TABLE lookups (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  category TEXT NOT NULL, -- 'session_types', 'appointment_status', etc.
  key TEXT NOT NULL,
  value_ar TEXT NOT NULL,
  value_en TEXT,
  order_index INTEGER,
  is_active BOOLEAN DEFAULT TRUE,
  metadata JSONB
);
```

#### API Endpoints:
- `GET/POST /api/setup/services`
- `GET/PUT/DELETE /api/setup/services/[id]`
- `GET/POST /api/setup/insurance-companies`
- `GET/PUT/DELETE /api/setup/insurance-companies/[id]`
- `GET/POST /api/setup/working-hours`
- `GET/POST /api/setup/holidays`
- `GET/PUT /api/setup/center-info`
- `GET/POST /api/setup/lookups`

#### UI Pages:
- `/dashboard/admin/setup` - Main setup page with tabs
  - Services Management
  - Insurance Companies
  - Working Hours & Holidays
  - Center Information
  - Lookups Management

---

### 2. ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Guardian Module (Ù…ÙˆØ¯ÙŠÙˆÙ„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** âš ï¸ Ù…Ù‡Ù…  
**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** 2 Ø£Ø³Ø§Ø¨ÙŠØ¹

#### Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- âœ… Ø±Ø¨Ø· ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ø¨Ø§Ù„Ù…Ø±Ø¶Ù‰ (Ø®Ø§ØµØ© Ø§Ù„Ù‚Ø§ØµØ±ÙŠÙ†)
- âœ… Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ù…Ø±ØªØ¨Ø·ÙŠÙ†
- âœ… Ø§Ø³ØªÙ„Ø§Ù… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰
- âœ… Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø­Ø¯ÙˆØ¯ Ù„Ù„Ù…Ù„Ù Ø§Ù„Ø·Ø¨ÙŠ
- âœ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©
- âœ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡

#### Database Schema:
```sql
-- Guardian Relationships
CREATE TABLE guardian_patient_relationships (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  guardian_id UUID REFERENCES users(id),
  patient_id UUID REFERENCES patients(id),
  relationship_type TEXT, -- 'parent', 'guardian', 'spouse', 'other'
  is_primary BOOLEAN DEFAULT FALSE,
  can_view_records BOOLEAN DEFAULT TRUE,
  can_approve_procedures BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Update users table to include guardian role
ALTER TABLE users 
ADD CONSTRAINT check_role 
CHECK (role IN ('admin', 'doctor', 'staff', 'patient', 'reception', 'insurance', 'guardian', 'medical_supervisor'));
```

#### API Endpoints:
- `GET /api/guardian/patients` - Get linked patients
- `GET /api/guardian/patients/[id]/medical-file` - View limited medical file
- `POST /api/guardian/approvals` - Approve medical procedures
- `GET /api/guardian/notifications` - Get notifications

#### UI Pages:
- `/dashboard/guardian` - Guardian dashboard
- `/dashboard/guardian/patients` - Linked patients list
- `/dashboard/guardian/patients/[id]` - Patient medical file (limited view)

---

### 3. ğŸ‘¨â€âš•ï¸ Medical Supervisor Module (Ù…ÙˆØ¯ÙŠÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø·Ø¨ÙŠ)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** âš ï¸ Ù…Ù‡Ù…  
**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** 2 Ø£Ø³Ø§Ø¨ÙŠØ¹

#### Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- âœ… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¹Ù…Ù„ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡
- âœ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
- âœ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø®Ø·Ø· Ø§Ù„Ø¹Ù„Ø§Ø¬
- âœ… Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ù„Ù„Ø£Ø·Ø¨Ø§Ø¡
- âœ… ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¬ÙˆØ¯Ø©
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø·Ø¨ÙŠ

#### Database Schema:
```sql
-- Medical Supervisor Assignments
CREATE TABLE medical_supervisor_assignments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  supervisor_id UUID REFERENCES users(id),
  doctor_id UUID REFERENCES users(id),
  start_date DATE,
  end_date DATE,
  is_active BOOLEAN DEFAULT TRUE
);

-- Case Reviews
CREATE TABLE case_reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  supervisor_id UUID REFERENCES users(id),
  patient_id UUID REFERENCES patients(id),
  doctor_id UUID REFERENCES users(id),
  review_type TEXT, -- 'treatment_plan', 'diagnosis', 'prescription'
  status TEXT, -- 'pending', 'approved', 'rejected', 'needs_revision'
  comments TEXT,
  reviewed_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### API Endpoints:
- `GET /api/supervisor/doctors` - Assigned doctors
- `GET /api/supervisor/cases` - Cases pending review
- `POST /api/supervisor/cases/[id]/review` - Review case
- `GET /api/supervisor/performance` - Performance metrics

#### UI Pages:
- `/dashboard/supervisor` - Supervisor dashboard
- `/dashboard/supervisor/doctors` - Assigned doctors
- `/dashboard/supervisor/reviews` - Case reviews
- `/dashboard/supervisor/performance` - Performance analytics

---

### 4. ğŸ“± WhatsApp Business Profile Management Module
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** âš ï¸ Ù…Ù‡Ù…  
**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** 2 Ø£Ø³Ø§Ø¨ÙŠØ¹

#### Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª WhatsApp Business Profile
- âœ… Ø±ÙØ¹ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ± (Profile picture, Cover photo)
- âœ… Ø¥Ø¯Ø§Ø±Ø© Business Description
- âœ… Ø¥Ø¯Ø§Ø±Ø© Business Categories
- âœ… Ø¥Ø¯Ø§Ø±Ø© Business Hours
- âœ… Ø¥Ø¯Ø§Ø±Ø© Business Location
- âœ… Ø¥Ø¯Ø§Ø±Ø© Message Templates
- âœ… Preview Templates
- âœ… Submit Templates for Approval
- âœ… Track Template Status

#### Database Schema:
```sql
-- WhatsApp Business Profile
CREATE TABLE whatsapp_business_profiles (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  business_name TEXT NOT NULL,
  business_description TEXT,
  profile_picture_url TEXT,
  cover_photo_url TEXT,
  category TEXT,
  website TEXT,
  email TEXT,
  address TEXT,
  location_lat NUMERIC,
  location_lng NUMERIC,
  business_hours JSONB,
  is_verified BOOLEAN DEFAULT FALSE,
  verification_status TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Message Templates
CREATE TABLE whatsapp_message_templates (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  category TEXT, -- 'MARKETING', 'UTILITY', 'AUTHENTICATION'
  language TEXT DEFAULT 'ar',
  header_type TEXT, -- 'TEXT', 'IMAGE', 'VIDEO', 'DOCUMENT'
  header_content TEXT,
  body TEXT NOT NULL,
  footer TEXT,
  buttons JSONB, -- Array of button objects
  status TEXT, -- 'draft', 'pending', 'approved', 'rejected'
  template_id TEXT, -- WhatsApp template ID after approval
  rejection_reason TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### API Endpoints:
- `GET/PUT /api/whatsapp/business-profile`
- `POST /api/whatsapp/business-profile/upload-image`
- `GET/POST /api/whatsapp/templates`
- `GET/PUT/DELETE /api/whatsapp/templates/[id]`
- `POST /api/whatsapp/templates/[id]/submit` - Submit for approval
- `GET /api/whatsapp/templates/[id]/status` - Check approval status

#### UI Pages:
- `/dashboard/admin/whatsapp/profile` - Business profile management
- `/dashboard/admin/whatsapp/templates` - Templates management
- `/dashboard/admin/whatsapp/templates/[id]` - Template editor

---

### 5. ğŸ’¬ Internal Messaging System (Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** âš ï¸ Ù…Ù‡Ù…  
**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** 2 Ø£Ø³Ø§Ø¨ÙŠØ¹

#### Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- âœ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- âœ… Group messaging
- âœ… File attachments
- âœ… Message search
- âœ… Read receipts
- âœ… Typing indicators
- âœ… Message reactions
- âœ… Message forwarding
- âœ… Message archiving

#### Database Schema:
```sql
-- Conversations
CREATE TABLE internal_conversations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  type TEXT DEFAULT 'direct', -- 'direct', 'group'
  name TEXT, -- For group conversations
  created_by UUID REFERENCES users(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Conversation Participants
CREATE TABLE conversation_participants (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  conversation_id UUID REFERENCES internal_conversations(id),
  user_id UUID REFERENCES users(id),
  role TEXT DEFAULT 'member', -- 'admin', 'member'
  joined_at TIMESTAMPTZ DEFAULT NOW(),
  last_read_at TIMESTAMPTZ,
  is_muted BOOLEAN DEFAULT FALSE
);

-- Messages
CREATE TABLE internal_messages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  conversation_id UUID REFERENCES internal_conversations(id),
  sender_id UUID REFERENCES users(id),
  content TEXT NOT NULL,
  message_type TEXT DEFAULT 'text', -- 'text', 'image', 'file', 'system'
  attachments JSONB, -- Array of file objects
  reply_to_id UUID REFERENCES internal_messages(id),
  is_edited BOOLEAN DEFAULT FALSE,
  edited_at TIMESTAMPTZ,
  is_deleted BOOLEAN DEFAULT FALSE,
  deleted_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Message Reactions
CREATE TABLE message_reactions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  message_id UUID REFERENCES internal_messages(id),
  user_id UUID REFERENCES users(id),
  emoji TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(message_id, user_id, emoji)
);

-- Message Read Receipts
CREATE TABLE message_read_receipts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  message_id UUID REFERENCES internal_messages(id),
  user_id UUID REFERENCES users(id),
  read_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(message_id, user_id)
);
```

#### API Endpoints:
- `GET/POST /api/messaging/conversations`
- `GET /api/messaging/conversations/[id]`
- `GET/POST /api/messaging/conversations/[id]/messages`
- `POST /api/messaging/messages/[id]/read`
- `POST /api/messaging/messages/[id]/reaction`
- `POST /api/messaging/conversations/[id]/participants`

#### UI Pages:
- `/dashboard/messaging` - Main messaging interface
- `/dashboard/messaging/[id]` - Conversation view

---

### 6. ğŸ”” Multi-Channel Notification System (Telegram + Slack)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** âš ï¸ Ù…Ù‡Ù…  
**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** 2 Ø£Ø³Ø§Ø¨ÙŠØ¹

#### Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- âœ… Integration Ù…Ø¹ Telegram Bot API
- âœ… Integration Ù…Ø¹ Slack Webhooks
- âœ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø·Ø§Ø±Ø¦Ø© Ø¹Ø¨Ø± Telegram
- âœ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù‡Ù…Ø© Ø¹Ø¨Ø± Slack
- âœ… Channel preferences Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…
- âœ… Notification routing rules
- âœ… Priority levels
- âœ… Delivery tracking

#### Database Schema:
```sql
-- Notification Channels
CREATE TABLE notification_channels (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  type TEXT NOT NULL, -- 'email', 'sms', 'whatsapp', 'telegram', 'slack', 'push'
  name TEXT NOT NULL,
  is_active BOOLEAN DEFAULT TRUE,
  config JSONB, -- Channel-specific configuration
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- User Notification Preferences
CREATE TABLE user_notification_preferences (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  notification_type TEXT, -- 'appointment', 'reminder', 'urgent', etc.
  channels JSONB, -- Array of enabled channels
  is_enabled BOOLEAN DEFAULT TRUE
);

-- Notification Routing Rules
CREATE TABLE notification_routing_rules (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  condition JSONB, -- When to apply this rule
  channels JSONB, -- Which channels to use
  priority INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT TRUE
);

-- Notification Delivery Log
CREATE TABLE notification_delivery_log (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  notification_id UUID REFERENCES notifications(id),
  channel TEXT NOT NULL,
  recipient TEXT NOT NULL,
  status TEXT, -- 'sent', 'delivered', 'failed', 'pending'
  error_message TEXT,
  sent_at TIMESTAMPTZ,
  delivered_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### API Endpoints:
- `POST /api/notifications/send` - Send notification (with channel selection)
- `GET/PUT /api/notifications/preferences` - User preferences
- `GET/POST /api/notifications/routing-rules` - Routing rules
- `GET /api/notifications/delivery-status/[id]` - Check delivery status

#### Integration Files:
- `src/lib/telegram.ts` - Telegram Bot API integration
- `src/lib/slack-notifications.ts` - Enhanced Slack integration

---

### 7. ğŸ“Š WhatsApp Live Log Dashboard Component
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** âš ï¸ Ù…Ù‡Ù…  
**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** 1 Ø£Ø³Ø¨ÙˆØ¹

#### Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- âœ… Real-time display of WhatsApp conversations
- âœ… Live message stream
- âœ… Conversation status indicators
- âœ… Active conversations count
- âœ… Message statistics
- âœ… Click to view full conversation
- âœ… Filter by status, time, etc.

#### Component Structure:
```typescript
// components/WhatsAppLiveLog.tsx
interface WhatsAppLiveLogProps {
  refreshInterval?: number // Default: 5000ms
  maxConversations?: number // Default: 50
}

// Features:
// - Real-time updates via Supabase Realtime
// - Auto-refresh
// - Conversation cards with status
// - Click to expand full conversation
// - Search & filter
```

#### Database Integration:
- Subscribe to `conversation_history` table changes
- Subscribe to `whatsapp_messages` table (if exists)
- Real-time updates via Supabase Realtime

#### API Endpoints:
- `GET /api/whatsapp/live-conversations` - Get active conversations
- `GET /api/whatsapp/conversations/[id]/messages` - Get conversation messages

---

### 8. â° Reminder & Follow-up System (Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°ÙƒÙŠØ± ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** âš ï¸ Ù…Ù‡Ù…  
**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** 2 Ø£Ø³Ø§Ø¨ÙŠØ¹

#### Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- âœ… Appointment reminders
- âœ… Medication reminders
- âœ… Follow-up reminders
- âœ… Treatment plan reminders
- âœ… Custom reminders
- âœ… Multi-channel reminders
- âœ… Reminder templates
- âœ… Reminder scheduling
- âœ… Reminder analytics

#### Database Schema:
```sql
-- Reminders
CREATE TABLE reminders (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  patient_id UUID REFERENCES patients(id),
  reminder_type TEXT, -- 'appointment', 'medication', 'follow_up', 'custom'
  title TEXT NOT NULL,
  message TEXT NOT NULL,
  scheduled_at TIMESTAMPTZ NOT NULL,
  sent_at TIMESTAMPTZ,
  status TEXT, -- 'pending', 'sent', 'failed', 'cancelled'
  channels JSONB, -- ['email', 'sms', 'whatsapp', 'telegram']
  is_recurring BOOLEAN DEFAULT FALSE,
  recurrence_pattern JSONB, -- For recurring reminders
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Follow-ups
CREATE TABLE follow_ups (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  patient_id UUID REFERENCES patients(id),
  doctor_id UUID REFERENCES users(id),
  appointment_id UUID REFERENCES appointments(id),
  follow_up_type TEXT, -- 'post_appointment', 'medication_check', 'progress_check'
  scheduled_date DATE,
  status TEXT, -- 'pending', 'completed', 'missed', 'cancelled'
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Evaluations
CREATE TABLE evaluations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  patient_id UUID REFERENCES patients(id),
  doctor_id UUID REFERENCES users(id),
  evaluation_type TEXT, -- 'session', 'treatment_plan', 'overall'
  criteria JSONB, -- Evaluation criteria and scores
  overall_score NUMERIC,
  comments TEXT,
  evaluated_at TIMESTAMPTZ DEFAULT NOW(),
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### API Endpoints:
- `GET/POST /api/reminders`
- `GET/PUT/DELETE /api/reminders/[id]`
- `GET/POST /api/follow-ups`
- `GET/PUT /api/follow-ups/[id]`
- `GET/POST /api/evaluations`
- `GET /api/reminders/analytics`

#### UI Pages:
- `/dashboard/admin/reminders` - Reminders management
- `/dashboard/doctor/follow-ups` - Doctor's follow-ups
- `/dashboard/doctor/evaluations` - Patient evaluations

---

## ğŸ”„ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©

### 1. Doctor Module Enhancements
- âœ… Doctor Performance Analytics Dashboard
- âœ… Case Collaboration System
- âœ… Auto-documentation from voice
- âœ… Smart templates library

### 2. Reception Module Enhancements
- âœ… Smart queue optimization
- âœ… Kiosk interface
- âœ… Multi-receptionist support
- âœ… Wait time predictions

### 3. Reports & Analytics Module
- âœ… Custom report builder
- âœ… Data visualization (Charts.js/Recharts)
- âœ… Scheduled reports
- âœ… Export to PDF/Excel
- âœ… Predictive analytics

### 4. CMS & Content Module
- âœ… Rich text editor (TinyMCE)
- âœ… Media library
- âœ… Content versioning
- âœ… SEO management

---

## ğŸ“… Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø²Ù…Ù†ÙŠØ©

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© (6 Ø£Ø³Ø§Ø¨ÙŠØ¹)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”´ Ø¹Ø§Ø¬Ù„

1. **Setup & Configuration Module** (3 Ø£Ø³Ø§Ø¨ÙŠØ¹)
2. **WhatsApp Business Profile Management** (2 Ø£Ø³Ø¨ÙˆØ¹)
3. **WhatsApp Live Log Dashboard** (1 Ø£Ø³Ø¨ÙˆØ¹)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø§ØªØµØ§Ù„Ø§Øª (6 Ø£Ø³Ø§Ø¨ÙŠØ¹)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** âš ï¸ Ù…Ù‡Ù…

1. **Guardian Module** (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
2. **Medical Supervisor Module** (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
3. **Internal Messaging System** (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø© (4 Ø£Ø³Ø§Ø¨ÙŠØ¹)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** âš ï¸ Ù…Ù‡Ù…

1. **Multi-Channel Notification System** (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
2. **Reminder & Follow-up System** (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª ÙˆØ§Ù„ØªØ·ÙˆÙŠØ± (8 Ø£Ø³Ø§Ø¨ÙŠØ¹)
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”„ ØªØ­Ø³ÙŠÙ†Ø§Øª

1. **Doctor Module Enhancements** (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
2. **Reception Module Enhancements** (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
3. **Reports & Analytics Module** (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)
4. **CMS & Content Module** (2 Ø£Ø³Ø§Ø¨ÙŠØ¹)

---

## ğŸ” Ù…Ù‚Ø§Ø±Ù†Ø© Ù…Ø¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø±Ø§Ø¦Ø¯Ø©

### Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©:
1. **Epic MyChart** - Patient portal & communication
2. **Cerner PowerChart** - Clinical documentation
3. **Allscripts** - Practice management
4. **NextGen** - Healthcare management
5. **Athenahealth** - Cloud-based healthcare

### Ø§Ù„Ù†ÙˆØ§Ù‚Øµ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©:

#### 1. Patient Portal Features
- âŒ Online appointment booking
- âŒ Prescription refill requests
- âŒ Lab results access
- âŒ Bill payment online
- âŒ Health records download

#### 2. Clinical Decision Support
- âŒ Drug interaction checker
- âŒ Clinical guidelines integration
- âŒ Evidence-based recommendations
- âŒ Risk stratification tools

#### 3. Interoperability
- âŒ HL7 FHIR integration
- âŒ EMR/EHR integration
- âŒ Lab system integration
- âŒ Pharmacy system integration

#### 4. Compliance & Security
- âŒ HIPAA compliance tools
- âŒ Audit trail viewer
- âŒ Data encryption at rest
- âŒ Access control matrix

#### 5. Advanced Analytics
- âŒ Population health analytics
- âŒ Predictive risk modeling
- âŒ Cost analysis
- âŒ Quality metrics dashboard

---

## ğŸ¯ Ø®Ø·Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù€ Enterprise SaaS Level

### Phase 1: Foundation (Ø§Ù„Ø£Ø³Ø³) - 6 Ø£Ø³Ø§Ø¨ÙŠØ¹
- âœ… Setup & Configuration Module
- âœ… WhatsApp Business Profile
- âœ… WhatsApp Live Log
- âœ… Basic integrations

### Phase 2: Users & Communication (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø§ØªØµØ§Ù„Ø§Øª) - 6 Ø£Ø³Ø§Ø¨ÙŠØ¹
- âœ… Guardian Module
- âœ… Medical Supervisor Module
- âœ… Internal Messaging
- âœ… Multi-channel notifications

### Phase 3: Automation & Intelligence (Ø§Ù„Ø£ØªÙ…ØªØ© ÙˆØ§Ù„Ø°ÙƒØ§Ø¡) - 4 Ø£Ø³Ø§Ø¨ÙŠØ¹
- âœ… Reminder & Follow-up System
- âœ… Enhanced AI features
- âœ… Workflow automation
- âœ… Smart scheduling

### Phase 4: Analytics & Reporting (Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±) - 4 Ø£Ø³Ø§Ø¨ÙŠØ¹
- âœ… Advanced Reports
- âœ… Data Visualization
- âœ… Predictive Analytics
- âœ… Business Intelligence

### Phase 5: Integration & Compliance (Ø§Ù„ØªÙƒØ§Ù…Ù„ ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„) - 4 Ø£Ø³Ø§Ø¨ÙŠØ¹
- âœ… HL7 FHIR integration
- âœ… EMR integration
- âœ… Compliance tools
- âœ… Security enhancements

---

## ğŸ“Š Metrics & KPIs Ù„Ù„Ù†Ø¬Ø§Ø­

### Technical Metrics:
- âœ… API Response Time < 200ms (p95)
- âœ… Database Query Time < 100ms (p95)
- âœ… Real-time Update Latency < 1s
- âœ… System Uptime > 99.9%
- âœ… Error Rate < 0.1%

### Business Metrics:
- âœ… User Adoption Rate > 80%
- âœ… Patient Satisfaction Score > 4.5/5
- âœ… Appointment Booking Rate > 90%
- âœ… Insurance Claim Approval Rate > 85%
- âœ… System Efficiency Improvement > 30%

---

## ğŸ› ï¸ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### New Dependencies:
```json
{
  "telegram-bot-api": "^1.0.0",
  "@slack/web-api": "^6.0.0",
  "recharts": "^2.0.0",
  "react-quill": "^2.0.0",
  "file-saver": "^2.0.0",
  "jspdf": "^2.0.0",
  "xlsx": "^0.18.0",
  "socket.io-client": "^4.0.0"
}
```

### Infrastructure:
- âœ… Redis for caching
- âœ… RabbitMQ for message queuing
- âœ… Elasticsearch for search
- âœ… S3-compatible storage for files

---

## âœ… Checklist Ù„Ù„Ø¥ÙƒÙ…Ø§Ù„

### Setup Module:
- [ ] Services management
- [ ] Insurance companies & API configs
- [ ] Working hours & holidays
- [ ] Center information
- [ ] Lookups management

### New User Types:
- [ ] Guardian role & permissions
- [ ] Medical Supervisor role & permissions
- [ ] UI for both roles

### WhatsApp:
- [ ] Business profile management
- [ ] Templates management
- [ ] Live log dashboard

### Communication:
- [ ] Internal messaging system
- [ ] Telegram integration
- [ ] Slack integration
- [ ] Multi-channel notifications

### Automation:
- [ ] Reminder system
- [ ] Follow-up system
- [ ] Evaluation system

### Enhancements:
- [ ] Doctor module improvements
- [ ] Reception module improvements
- [ ] Reports & Analytics
- [ ] CMS improvements

---

## ğŸ“ Ø§Ù„Ø®Ù„Ø§ØµØ©

Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ø³ØªØ¤Ø¯ÙŠ Ø¥Ù„Ù‰:
- âœ… Ù†Ø¸Ø§Ù… Enterprise SaaS Ù…ØªÙƒØ§Ù…Ù„
- âœ… ØªØºØ·ÙŠØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
- âœ… Ù…Ø³ØªÙˆÙ‰ Ø§Ø­ØªØ±Ø§ÙÙŠ Ø¹Ø§Ù„ÙŠ
- âœ… Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙˆØ³Ø¹
- âœ… Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„

**Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:** 20-24 Ø£Ø³Ø¨ÙˆØ¹  
**Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©:** Ø­Ø³Ø¨ Ø§Ù„ÙØ±ÙŠÙ‚  
**ROI Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:** Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹

---

**ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø·Ø© Ø¨ÙˆØ§Ø³Ø·Ø©:** AI Assistant  
**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 2025-01-17  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 1.0 Enterprise

